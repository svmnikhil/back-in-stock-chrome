!async function(){const t=document.querySelectorAll(["button","span",'input[type="button"]','input[type="submit"]'].join(", "));var e="",o="";const n=["notify me","notify me when available","join waitlist","out of stock","sold out"],r=[];t.forEach((t=>{const e=t.textContent.toLowerCase().trim(),o=(t.value||"").toLowerCase().trim();n.some((t=>e.includes(t)||o.includes(t)))&&r.push(t)})),r.length>0&&new Promise(((t,e)=>{const o=()=>{let o=null,n=0;const r=new IntersectionObserver(((e,r)=>{e.forEach((t=>{if(t.isIntersecting){const e=t.target,r=e.naturalWidth*e.naturalHeight;r>n&&r>9e4&&(o=e,n=r)}})),o&&(r.disconnect(),t(o.src))}),{rootMargin:"0px",threshold:.01});document.querySelectorAll("img").forEach((t=>{r.observe(t)})),setTimeout((()=>{r.disconnect(),o||e(null)}),1e4)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o()})).then((async t=>{[o,e]=function(){const t=document.querySelector('script[type="application/ld+json"]');let e="";if(t)try{const o=JSON.parse(t.textContent);o.name&&(e=o.name)}catch(t){console.error("Error parsing Schema.org data:",t)}if(!e){const t=['meta[property="og:title"]','meta[name="twitter:title"]','[itemprop="name"]',"h1","h2",".product-name",".product-title","#productTitle","#productName"];for(let o of t){const t=document.querySelector(o);if(t){const o=t.content||t.textContent;if(o){e=o.trim();break}}}}const o=(t=>{const e=t.match(/^https?:\/\/([^/?#]+)(?:[/?#]|$)/i);let o=e&&e[1];if(o=o&&o.replace("www.",""),o){const t=o.lastIndexOf(".");-1!==t&&(o=o.substring(0,t))}return o})(window.location.href);return o&&e.replace(/\s+/g,"").toLowerCase().includes(o.toLowerCase())?e=document.title:e||(e=document.title),[o,e]}();const n={productImage:t,productName:e,companyName:o,productUrl:window.location.href};if(console.log(n),null!=n.productImage)try{const t=await new Promise(((t,e)=>{chrome.runtime.sendMessage(n,(o=>{chrome.runtime.lastError&&e(chrome.runtime.lastError),t(o)}))}));console.log("Response from background script:",t)}catch(t){console.error("Error sending message:",t)}})).catch((async t=>{try{const t=await new Promise(((t,e)=>{chrome.runtime.sendMessage(null,(o=>{chrome.runtime.lastError&&e(chrome.runtime.lastError),t(o)}))}));console.log("Response from background script:",t)}catch(t){console.error("Error sending message:",t)}}))}();